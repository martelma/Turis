<!-- Main -->
<div class="flex flex-auto h-full">
    <div class="flex flex-col flex-auto h-full overflow-hidden sm:overflow-y-auto"
        [ngClass]="{
            'sm:mb-18': results?.items?.length > 0
        }">
        <ng-container *ngIf="results?.items?.length > 0; else noService">
            <div class="grid overflow-hidden sm:overflow-y-auto">
                <!-- Header -->
                <div class="list-grid z-10 sticky top-0 grid gap-4 py-4 px-6 md:px-8 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5">
                    <div class="hidden md:block"></div>
                    <div class="hidden md:block">{{ 'Service.Date' | transloco }}</div>
                    <div class="hidden sm:block">{{ 'Service.Title' | transloco }}</div>
                    <div class="hidden lg:block">{{ 'Service.ServiceType' | transloco }}</div>
                    <div class="hidden lg:block">{{ 'Service.DurationType' | transloco }}</div>
                    <div class="hidden lg:block">{{ 'Service.People' | transloco }}</div>
                    <div class="hidden lg:block">{{ 'Service.PriceCalculated' | transloco }}</div>
                    <div class="hidden lg:block">{{ 'Service.Price' | transloco }}</div>
                    <div class="hidden lg:block">{{ 'Service.CommissionCalculated' | transloco }}</div>
                </div>
                <!-- Rows -->
                <ng-container *ngIf="list">
                    <ng-container *ngFor="let item of results?.items; trackBy: trackByFn">
                        <div class="list-grid grid items-center gap-4 py-3 px-6 md:px-8 border-b">

                            <!-- <div class="sm:block whitespace-pre-wrap">
                                {{ item?.date | date: 'dd/MM/yyyy' }}
                            </div> -->

                            <div class="sm:block whitespace-pre-wrap">
                                <span [ngClass]="getStatusColorClass(item)" class="color-box mr-3" [matTooltip]="item?.status"></span>
                                <span [ngClass]="getBillingStatusColorClass(item)" class="color-box mr-3" [matTooltip]="item?.billingStatus"></span>
                                <span [ngClass]="getCommissionStatusColorClass(item)" class="color-box mr-3" [matTooltip]="item?.commissionStatus"></span>
                            </div>

                            <div class="sm:block whitespace-pre-wrap">
                                {{ item?.date | date: 'dd/MM/yyyy' }}
                            </div>

                            <div class="truncate">
                                {{ item.title }}
                            </div>

                            <div class="truncate">
                                {{ item?.serviceType }}
                            </div>

                            <div class="sm:block whitespace-pre-wrap">
                                {{ item?.durationType }}
                            </div>

                            <div class="sm:block whitespace-pre-wrap">
                                {{ item?.people }}
                            </div>

                            <div class="sm:block whitespace-pre-wrap">
                                {{ item?.priceCalculated }}
                            </div>

                            <div class="sm:block whitespace-pre-wrap">
                                {{ item?.price }}
                            </div>

                            <div class="sm:block whitespace-pre-wrap">
                                {{ item?.commissionCalculated }}
                            </div>

                            <!-- Details button -->
                            <!-- <div>
                                <button
                                    class="min-w-10 min-h-7 h-7 px-2 leading-6"
                                    mat-stroked-button
                                    (click)="toggleDetails(item.id)">
                                    <mat-icon
                                        class="icon-size-5"
                                        [svgIcon]="
                                            selectedItem?.id === item.id
                                                ? 'heroicons_outline:chevron-up'
                                                : 'heroicons_outline:chevron-down'
                                        "></mat-icon>
                                </button>
                            </div> -->
                        </div>
                        <!-- Selected Item -->
                        <div class="grid">
                            <ng-container *ngIf="selectedItem?.id === item.id">
                                <ng-container *ngTemplateOutlet="
                                        rowDetailsTemplate;
                                        context: { $implicit: item }
                                    "></ng-container>
                            </ng-container>
                        </div>
                    </ng-container>
                </ng-container>
            </div>
        </ng-container>

        <!-- Paginator -->
        <mat-paginator class="mt-auto border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent"
            [ngClass]="{ 'pointer-events-none': itemsLoading }"
            [length]="results?.totalCount ?? 0"
            [pageSize]="accountStatementParameters?.pageSize ?? 10"
            [pageIndex]="accountStatementParameters?.pageIndex ?? 0"
            [pageSizeOptions]="[5, 10, 25, 100]"
            (page)="handlePageEvent($event)"
            [showFirstLastButtons]="true"></mat-paginator>

        <ng-template #noService>
            <div class="z-100 flex flex-auto flex-col items-center justify-center bg-gray-100 dark:bg-transparent">
                <mat-icon class="icon-size-24"
                    [svgIcon]="'heroicons_outline:circle-stack'"></mat-icon>
                <div class="mt-4 text-2xl font-semibold tracking-tight text-secondary">There are no service</div>
            </div>
        </ng-template>
    </div>
</div>
