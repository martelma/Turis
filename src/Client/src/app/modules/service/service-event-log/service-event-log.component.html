<ng-container *ngIf="mode === 'grid'">
    <p>grid mode</p>
</ng-container>
<ng-container *ngIf="mode === 'activities'">
    <ol>
        <!-- Activities -->
        <ng-container *ngFor="let group of groupedEventMap | keyvalue">
            <ng-container *ngIf="group">
                <ng-container *ngFor="let eventLog of group.value; index as i; let first = first; let last = last">
                    <!-- Date separator -->
                    <ng-container *ngIf="first">
                        <li class="relative flex py-7">
                            <div
                                class="relative py-2 px-8 text-md font-medium leading-5 rounded-full bg-primary text-on-primary">
                                {{ group?.key | date: 'mediumDate' }}
                            </div>
                        </li>
                    </ng-container>

                    <!-- Activity -->
                    <li class="relative flex py-7">
                        <!-- Line -->
                        <ng-container *ngIf="!last">
                            <div class="absolute top-7 left-5 w-0.5 h-full -ml-px bg-gray-300 dark:bg-gray-600"></div>
                        </ng-container>

                        <div class="relative flex flex-auto">
                            <!-- Icon -->
                            <div
                                class="flex shrink-0 items-center justify-center w-10 h-10 mr-4 rounded-full bg-gray-400"
                                [ngClass]="{
                                    'bg-yellow-500 text-black': eventLog.eventName === 'CartRouteAbortedEvent',
                                    'bg-green-500 text-white':
                                        eventLog.eventName === 'CartRouteOpenedEvent' ||
                                        eventLog.eventName === 'CartRouteClosedEvent' ||
                                        eventLog.eventName === 'CartRouteSerialDoneEvent' ||
                                        eventLog.eventName === 'CartRouteSerialProductionDeclarationEvent',
                                    'bg-red-500 text-white': eventLog.eventName === 'CartRouteSerialUnDoneEvent'
                                }">
                                <mat-icon
                                    *ngIf="eventLog.eventName === 'CartRouteAbortedEvent'"
                                    class="icon-size-5 text-white"
                                    [svgIcon]="'heroicons_outline:x-mark'"></mat-icon>

                                <mat-icon
                                    *ngIf="eventLog.eventName === 'CartRouteOpenedEvent'"
                                    class="icon-size-5 text-white"
                                    [svgIcon]="'heroicons_outline:lock-open'"></mat-icon>
                                <mat-icon
                                    *ngIf="eventLog.eventName === 'CartRouteClosedEvent'"
                                    class="icon-size-5 text-white"
                                    [svgIcon]="'heroicons_outline:ock-closed'"></mat-icon>
                                <mat-icon
                                    *ngIf="eventLog.eventName === 'CartRouteSerialDoneEvent'"
                                    class="icon-size-5 text-white"
                                    [svgIcon]="'heroicons_outline:check'"></mat-icon>
                                <mat-icon
                                    *ngIf="eventLog.eventName === 'CartRouteSerialUnDoneEvent'"
                                    class="icon-size-5 text-white"
                                    [svgIcon]="'heroicons_outline:arrow-uturn-down'"></mat-icon>
                                <mat-icon
                                    *ngIf="eventLog.eventName === 'CartRouteSerialProductionDeclarationEvent'"
                                    class="icon-size-5 text-white"
                                    [svgIcon]="'heroicons_outline:document-arrow-down'"></mat-icon>
                            </div>

                            <!-- Content -->
                            <div class="flex flex-col flex-auto items-start">
                                <!-- Description -->
                                <ng-container>
                                    <div>
                                        <span *ngIf="eventLog.eventName === 'CartRouteAbortedEvent'">Cart Abort</span>
                                        <span *ngIf="eventLog.eventName === 'CartRouteOpenedEvent'">Cart Open </span>
                                        <span *ngIf="eventLog.eventName === 'CartRouteClosedEvent'">Cart Close </span>
                                        <span *ngIf="eventLog.eventName === 'CartRouteSerialDoneEvent'">Cart Done</span>
                                        <span *ngIf="eventLog.eventName === 'CartRouteSerialUnDoneEvent'">
                                            Cart Undo Done
                                        </span>
                                        <span
                                            *ngIf="eventLog.eventName === 'CartRouteSerialProductionDeclarationEvent'">
                                            Production Declaration
                                        </span>

                                        {{ eventLog?.additionalInfo }}

                                        <span *ngIf="eventLog?.parentAdditionalInfo" class="font-bold">
                                            {{ eventLog?.parentAdditionalInfo }}
                                        </span>
                                    </div>
                                </ng-container>
                                <div
                                    class="flex flex-col sm:flex-row sm:items-center mt-2 sm:mt-1 sm:space-x-2 text-md leading-5">
                                    <!-- Date -->
                                    <div class="flex gap-2 items-center text-secondary">
                                        <mat-icon class="icon-size-4" [svgIcon]="'heroicons_outline:clock'"> </mat-icon>
                                        {{ eventLog?.timeStamp | date: userDateFormats.time }}
                                    </div>

                                    <div class="hidden sm:block">&bull;</div>

                                    <div class="flex gap-2 items-center text-secondary">
                                        <mat-icon class="icon-size-4" [svgIcon]="'heroicons_outline:user'"> </mat-icon>
                                        {{ eventLog?.user?.fullName }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </ng-container>
            </ng-container>
        </ng-container>
    </ol>
</ng-container>
